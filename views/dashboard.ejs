<% layout('./layout/boilerplate') %> 
<link rel="stylesheet" href="/css/dashboard.css">

<section class="vh-100" style="background-color: #508bfc;">
<div class="container-fluid py-1 h-100">


    <div class="row d-flex justify-content-center align-items-start h-50">

        <div class="col-5 h-100">
            <div class="card shadow-2-strong" style="border-radius: 1rem;">
                <div class="card-body px-5 py-4 text-center overflow-auto">
                <h3>Login Log</h3>
                <div>
                    <!-- <ul>
                        <% for(let user of alluserlogs){%>
                            <li><%= user.username %></li>fname %></li>
                        <% } %>
                    </ul> -->
                    <table class="table table-sm">
                        <thead>
                          <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Login Date</th>
                            <th scope="col">Status</th>
                            <th scope="col">First Name</th>
                            <th scope="col">Last Name</th>
                            <th scope="col">Email</th>
                          </tr>
                        </thead>
                        <tbody>
                            <% for(let user of alluserlogs){%>
                                <tr>
                                    <td><%= user.User_id %></td>
                                    <td><%= user.login_date.toLocaleString() %></td>
                                    <td><%= user.status %></td>
                                    <td><%= user.fname %></td>
                                    <td><%= user.lname %></td>
                                    <td><%= user.email %></td>
                                </tr>
                            <% } %>
                        </tbody>
                      </table>
                </div>
                </div>
            </div>
        </div>

        <div class="col-3 h-100 flex-grow-1">
            <div class="card shadow-2-strong h-md-100" style="border-radius: 1rem;">
                <div class="card-body px-5 py-4 text-center overflow-auto">
                    <h3>All Users</h3>
                    <div>
                        <table class="table table-sm">
                            <thead>
                              <tr>
                                <th scope="col">User ID</th>
                                <th scope="col">First Name</th>
                                <th scope="col">Last Name</th>
                                <th scope="col">Email</th>
                              </tr>
                            </thead>
                            <tbody>
                                <% for(let user of alluser){%>
                                    <tr>
                                        <td><%= user.User_id %></td>
                                        <td><%= user.fname %></td>
                                        <td><%= user.lname %></td>
                                        <td><%= user.email %></td>
                                    </tr>
                                <% } %>
                            </tbody>
                          </table>
                    </div>
                </div>
            </div>
        </div>


        <div class="col-3 h-100">
            <div class="card shadow-2-strong h-md-100" style="border-radius: 1rem;">
                <div class="card-body px-5 py-4 text-center">
                    <h3>Frequently Visited</h3>
                    <canvas id="myChart" class="h-85 w-100"></canvas>
                </div>
            </div>
        </div>
    </div>


    <div class="row d-flex justify-content-center align-items-start h-50">

        <div class="col-4 h-100 ">
            <div class="card shadow-2-strong h-md-100" style="border-radius: 1rem;">
                <div class="card-body px-5 py-4 text-center overflow-auto">
                    <h3>Active users</h3>
                    <div>
                        <table class="table table-sm">
                            <thead>
                              <tr>
                                <th scope="col">Login ID</th>
                                <th scope="col">First Name</th>
                                <th scope="col">Last Name</th>
                                <th scope="col">Email</th>
                              </tr>
                            </thead>
                            <tbody>
                                <% for(let user of allactive){%>
                                    <tr>
                                        <td><%= user.Login_id %></td>
                                        <td><%= user.fname %></td>
                                        <td><%= user.lname %></td>
                                        <td><%= user.email %></td>
                                    </tr>
                                <% } %>
                            </tbody>
                          </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-8 h-100">
            <div class="card shadow-2-strong h-md-100" style="border-radius: 1rem;">
                <div class="card-body px-5 py-4 text-center overflow-auto">
                    <h3>Travel history</h3>
                    <div>
                        <table class="table table-sm">
                            <thead>
                              <tr>
                                <th scope="col">Travel ID</th>
                                <th scope="col">Travel Date</th>
                                <th scope="col">Status</th>
                                <th scope="col">First Name</th>
                                <th scope="col">Last Name</th>
                                <th scope="col">Source</th>
                                <th scope="col">Destination</th>
                                <th scope="col">purpose</th>
                              </tr>
                            </thead>
                            <tbody>
                                <% for(let user of alltravellogs){%>
                                    <tr>
                                        <td><%= user.travelid %></td>
                                        <td><%= user.Travel_date.toLocaleString() %></td>
                                        <td><%= user.status %></td>
                                        <td><%= user.fname %></td>
                                        <td><%= user.lname %></td>
                                        <td><%= user.source %></td>
                                        <td><%= user.destination %></td>
                                        <td><%= user.purpose %></td>
                                    </tr>
                                <% } %>
                            </tbody>
                          </table>
                    </div>
                </div>
            </div>
        </div>

    </div>


</div>
</section>

<script>
    const Frequently_visited = { features: JSON.parse(`<%-JSON.stringify(mostvisited)%>`) };
    console.log(Frequently_visited);
</script>